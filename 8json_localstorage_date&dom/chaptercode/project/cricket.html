<!DOCTYPE html>
<html lang="en">
<head>
<title>Cricket Game</title>
<llink rel="stylesheet" href="cricket.css">
</head>
<body>
<h1>Bat Ball Stump Game</h1>



<button class="choice-button" onclick="
computerChoice = generateComputerChoice();
resultMsg = getResult('Bat', computerChoice);
showResult('Bat', computerChoice, resultMsg);
"><img src="images/bat.png" alt="Bat" class="choice-image"></button>

<button class="choice-button" onclick="
computerChoice = generateComputerChoice();
resultMsg = getResult('Ball', computerChoice);
showResult('Ball', computerChoice, resultMsg);
"><img src="images/ball.png" alt="Ball" class="choice-image"></button>

<button class="choice-button" onclick="
computerChoice = generateComputerChoice();
resultMsg = getResult('Stump', computerChoice);
showResult('Stump', computerChoice, resultMsg);
"><img src="images/stump.png" alt="Stump" class="choice-image"></button>

<button onclick="
localStorage.clear();
resetScore(); 
document.querySelector('#user-move').textContent = '';
document.querySelector('#comp-move').textContent = '';
document.querySelector('#result').textContent = '';
">Reset</button>

<h3 id="user-move"></h3>
<h3 id="comp-move"></h3>
<h3 id="result"></h3>
<h3 id="score-display"></h3>

<script>
let scoreStr = localStorage.getItem('Score');
let score;
let computerChoice;
let resultMsg;

// Pehli baar load hone par
resetScore(scoreStr);

function resetScore(scoreStr) {
// Agar scoreStr null hai (jaise Reset ke baad), toh default values set hongi
score = scoreStr ? JSON.parse(scoreStr) : {
win: 0,
lose: 0,
tie: 0,
};

score.displayScore = function() {
return `Score: ${this.win} Wins, ${this.lose} Lost, ${this.tie} Tie`;
};

// Reset hone par ya load hone par score screen par update karein
document.querySelector('#score-display').textContent = score.displayScore();
}

function generateComputerChoice() {
let randomNumber = Math.random() * 3;
if (randomNumber <= 1) {
return 'Bat';
} else if (randomNumber <= 2) {
return 'Ball';
} else {
return 'Stump';
}
}

function getResult(userMove, computerMove) {
if (userMove === 'Bat') {
if (computerMove === 'Ball') {
score.win++;
return 'User won.';
} else if (computerMove === 'Bat') {
score.tie++;
return `It's a tie`;
} else {
score.lose++;
return 'Computer has won';
}
} else if (userMove === 'Ball') {
if (computerMove === 'Ball') {
score.tie++;
return `It's a tie`;
} else if (computerMove === 'Stump') {
score.lose++;
return 'Computer has won';
} else {
score.win++;
return 'User won.';
}
} else { // Stump
if (computerMove === 'Ball') {
score.lose++; 
return 'Computer has won.';
} else if (computerMove === 'Bat') {
score.win++; 
return 'User won';
} else {
score.tie++;
return `It's a tie`;
}
}
}

function showResult(userMove, computerMove, result) {
localStorage.setItem('Score', JSON.stringify(score));

document.querySelector('#user-move').textContent =
userMove !== undefined ? `User chose: ${userMove}` : '';

document.querySelector('#comp-move').textContent =
computerMove !== undefined ? `Computer chose: ${computerMove}` : '';

document.querySelector('#result').textContent =
result !== undefined ? result : '';

document.querySelector('#score-display').textContent =
score !== undefined ? score.displayScore() : '';
}
</script>
</body>
</html>